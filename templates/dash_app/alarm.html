{% load static %}
<html lang="en">
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <meta charset="UTF-8">
    <title>ALARM</title>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
<style>
table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}

.button {
  font: bold 20px Arial;
  text-decoration: none;
  background-color: #6F8FAF;
  color: #352B29;
  padding: 4px 9px 4px 9px;
  border-top: 1px solid #CCCCCC;
  border-right: 1px solid #333333;
  border-bottom: 1px solid #333333;
  border-left: 1px solid #CCCCCC;
}
</style>
</head>
<body>
<!-- ` -->
  {%  include 'dash_app/insights_navbar.html' %}

{% if request.user.username == 'khurram' %}

<form action="" method="POST" id="alarm">
     {% csrf_token %}


        <div class="container2" style="display: flex;width: 70%;flex-direction: column;align-items: center; gap: 30px;">
            <div>
                <table>

                    <tr>
                        <th>SCHEMA</th>
                        <th>TABLE NAME</th>
                        <th>COLUMN LIST</th>
                    </tr>

                    {% for i in abc %}

                    <tr>
                        <td>{{ i.schema_name }}</td>
                        <td>{{ i.table_name }}</td>
                        <td>{{ i.column_lst }}</td>
                    </tr>

                    {% endfor %}

                </table>
            </div>
        </div>

            <div>
                <div class="container" style="display: flex;flex-direction:row">
    <div style="margin-top: 30px; margin-left: 70px;" >
        <!--                    <a href="{% url 'alarm_manage' %}"><button> ALARM DETAILS </button>  </a>-->
        <h1>
                ALARM CREATION
            </h1>

    </div>
        <div style="margin-left: 500px;">
            <a href="{% url 'alarm_manage' %}" class="button">ALARM DETAILS </a>
        </div>
</div>
                <center>
                    <h1>
<!--                        ALARM-->
                    </h1>
                </center>

            </div>

        <div class="container" style="display: flex;margin-top: 50px;flex-direction: row; gap: 30px;">

        <div>
            <div class="mb-3">
                <label for="title" class="form-label" style="font-size: 20px;">ALARM TITLE</label>
                <input type="title" id="title" name="title" class="form-control" style="width: 200px;" placeholder="Enter Alarm Title">
            </div>
            <div class="mb-3">
                <label for="datasource" class="form-label" style="font-size: 20px;">DATA SOURCE</label>
                <input type="text" id="datasource" name="datasource" class="form-control" style="width: 200px;" placeholder="Enter DataSource">
            </div>
            <div class="mb-3">
                <label for="table_name" class="form-label" style="font-size: 20px;">TABLE NAME</label>
                <input type="text" id="table_name" name="table_name" class="form-control" style="width: 200px;" placeholder="Enter Table Name">
            </div>

        </div>
            <div>
                <div class="mb-3">
                    <label for="column_name" class="form-label" style="font-size: 20px;">COLUMN NAME</label>
                    <input type="text" id="column_name" name="column_name" class="form-control" style="width: 200px;" placeholder="Enter Column Name">
                </div>
                <div class="mb-3">
                    <label for="max" class="form-label" style="font-size: 20px;">THRESHOLD (MAX)</label>
                    <input type="number" id="max" name="max" class="form-control" style="width: 200px;" placeholder="Enter Max Value">
                </div>
                <div class="mb-3">
                    <label for="min" class="form-label" style="font-size: 20px;">THRESHOLD (MIN)</label>
                    <input type="number" id="min" name="min" class="form-control" style="width: 200px;" placeholder="Enter Min Value">
                </div>
                <div>
                    <button type="submit" class="btn btn-primary" style="width: 200px;"> ALARM </button>
                </div>
            </div>
        <div class="container" style="display: flex;width: 70%;flex-direction: column;align-items: center; gap: 30px;">
            <div>
                <h1>data</h1>
            </div>
            <div>
                {% for each in fetched_data %}
                        {{ each|linebreaks }}
                {% endfor %}
            </div>

            <div>
                <h1>OUTLIER</h1>
            </div>
            <div>
                {% for each in outlier %}
                        {{ each|linebreaks }}
                {% endfor %}
            </div>
        </div>


        </div>





</form>

{% elif request.user.username != 'khurram' %}
<h1>UNFORTUNATELY! {{request.user}}, ONLY ADMIN CAN CREATE ALARM </h1>

{% endif %}

</body>
</html>

